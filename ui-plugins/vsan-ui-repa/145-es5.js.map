{"version":3,"sources":["webpack:///src/app/vsan/file-services/shared/file-services-common.module.ts","webpack:///src/app/vsan/file-services/file-analytics/edit-file-analytics-dialog.html","webpack:///src/app/vsan/file-services/file-analytics/edit-file-analytics.module.ts","webpack:///src/app/vsan/file-services/file-analytics/edit-file-analytics-dialog.component.ts"],"names":["FileServicesCommonModule","routes","path","component","EditFileAnalyticsModule","EditFileAnalyticsDialogComponent","fileServicesConfigService","fileAnalyticsService","loading","clusterRef","contextObject","getFileAnalyticsConfigData","fileServiceConfig","originalFileAnalyticsEnabled","isFileAnalyticsEnabled","handleError","isConfigChanged","closeModalDialog","alertMessages","configureFileService","taskRef","error","push"],"mappings":"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","file":"145-es5.js","sourcesContent":["/* Copyright 2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {ClarityModule} from \"@clr/angular\";\nimport {FileServicesOvfSettings} from \"./file-services-ovf-settings.component\";\nimport {ShareNetPermissionComponent} from \"./share-net-permission.component\";\nimport {CommonPipeModule} from \"@pipe/common-pipe.module\";\nimport {EditFileAnalyticsComponent} from \"./edit-file-analytics.component\";\nimport {FormsModule} from \"@angular/forms\";\nimport {ValidationModule} from \"@component/validation/validation.module\";\nimport {EditShareFileAnalyticsComponent} from \"./edit-share-file-analytics.component\";\n\n@NgModule({\n   imports: [\n      CommonModule,\n      ClarityModule,\n      CommonPipeModule,\n      FormsModule,\n      ValidationModule,\n   ],\n   declarations: [\n      FileServicesOvfSettings,\n      ShareNetPermissionComponent,\n      EditFileAnalyticsComponent,\n      EditShareFileAnalyticsComponent,\n   ],\n   exports: [\n      FileServicesOvfSettings,\n      ShareNetPermissionComponent,\n      EditFileAnalyticsComponent,\n      EditShareFileAnalyticsComponent\n   ],\n})\nexport class FileServicesCommonModule {\n}","<!-- Copyright 2020-2022 VMware, Inc. All rights reserved. -- VMware Confidential -->\n<vsan-edit-prompt\n   [title]=\"'vsan.cluster.dialog.file.analytics.enable.title' | localized\"\n   [blockContent]=\"loading\"\n   [blockButton]=\"loading\"\n   [(alertMessages)]=\"alertMessages\"\n   (onConfirm)=\"ok()\">\n   <!-- The isFileAnalyticsRuntimeSupported check is done before dialog gets opened -->\n   <vsan-edit-file-analytics *ngIf=\"fileServiceConfig\"\n                             [(fileServiceConfig)]=\"fileServiceConfig\"\n                             [isFileAnalyticsRuntimeSupported]=\"true\"\n                             [isEdit]=\"true\">\n   </vsan-edit-file-analytics>\n</vsan-edit-prompt>\n","/* Copyright 2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {EditFileAnalyticsDialogComponent} from \"./edit-file-analytics-dialog.component\";\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {CommonPipeModule} from \"@pipe/common-pipe.module\";\nimport {FileServicesCommonModule} from \"../shared/file-services-common.module\";\nimport {PromptModule} from \"@component/dialog/prompt/prompt.module\";\n\nconst routes: Routes = [\n   {\n      path: \"\",\n      component: EditFileAnalyticsDialogComponent,\n   },\n];\n\n@NgModule({\n   imports: [\n      CommonModule,\n      CommonPipeModule,\n      PromptModule,\n      FileServicesCommonModule,\n      RouterModule.forChild(routes),\n   ],\n   declarations: [\n      EditFileAnalyticsDialogComponent,\n   ],\n})\nexport class EditFileAnalyticsModule {\n}","/* Copyright 2020-2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {Component, OnInit} from \"@angular/core\";\nimport {VsanFileServiceCommonConfig} from \"@generated/vsan-file-service-common-config\";\nimport {VsanFileServiceConfigService} from \"@generated/vsan-file-service-config-service\";\nimport {ManagedObject} from \"@service/managed-object\";\nimport {VsanUiUtils} from \"@util/vsan-util\";\nimport {FileAnalyticsConfigService} from \"@generated/file-analytics-config-service\";\n\n@Component({\n   templateUrl: \"edit-file-analytics-dialog.html\",\n   selector: \"vsan-edit-file-analytics-dialog\",\n})\nexport class EditFileAnalyticsDialogComponent implements OnInit {\n   loading: boolean = true;\n   fileServiceConfig: VsanFileServiceCommonConfig;\n   alertMessages: string[];\n\n   private clusterRef: ManagedObject;\n   private originalFileAnalyticsEnabled: boolean;\n\n   constructor(private fileServicesConfigService: VsanFileServiceConfigService,\n         private fileAnalyticsService: FileAnalyticsConfigService) {}\n\n   async ngOnInit(): Promise<void> {\n      this.clusterRef = ManagedObject.contextObject;\n      try {\n         this.fileServiceConfig = await this.fileAnalyticsService.getFileAnalyticsConfigData(this.clusterRef);\n         this.originalFileAnalyticsEnabled = this.fileServiceConfig.isFileAnalyticsEnabled;\n      } catch (e) {\n         this.handleError(e);\n      } finally {\n         this.loading = false;\n      }\n   }\n\n   async ok(): Promise<void> {\n      if (!this.isConfigChanged()) {\n         VsanUiUtils.closeModalDialog();\n      }\n      this.alertMessages = [];\n      this.loading = true;\n      try {\n         const taskRef: ManagedObject =\n               await this.fileServicesConfigService.configureFileService(this.clusterRef, this.fileServiceConfig);\n         VsanUiUtils.closeModalDialog(taskRef);\n      } catch (e) {\n         this.handleError(e);\n      } finally {\n         this.loading = false;\n      }\n   }\n\n   private isConfigChanged(): boolean {\n      return this.originalFileAnalyticsEnabled !== this.fileServiceConfig.isFileAnalyticsEnabled;\n   }\n\n   private handleError(error: string): void {\n      this.alertMessages.push(error);\n   }\n}\n"]}