{"version":3,"sources":["webpack:///src/app/vsan/faultdomains/actions/stretchedcluster/configure-stretched-cluster.component.ts","webpack:///src/app/vsan/faultdomains/actions/stretchedcluster/configure-stretched-cluster.module.ts","webpack:///src/app/vsan/faultdomains/actions/stretchedcluster/configure-stretched-cluster.component.ts.ConfigureStretchedClusterWizardComponent.html","webpack:///src/app/vsan/faultdomains/actions/stretchedcluster/summary-page.html","webpack:///src/app/vsan/faultdomains/actions/stretchedcluster/summary-page.component.ts","webpack:///src/app/vsan/common/util/witness-host.util.ts"],"names":["ConfigureStretchedClusterWizardComponent","vsanConfigService","title","startingTaskProperty","services","includeClaimDisksPage","hasDiskGroupsOnWitness","isWitnessDeployedFromOvf","isClaimDisksPageVisible","STRETCHED_CLUSTER","isVsanMaxEnabled","changeWitnessContext","getModalContext","clusterRef","contextObject","changeWitnessHost","configureStretchedCluster","context","isVsanMaxWorkflow","getString","pages","stretchedClusterContext","preferredName","preferredDomain","currentWitnessHostRef","currentWitnessHost","routes","path","component","ConfigureStretchedClusterModule","StretchedClusterSummaryPageComponent","preferredHosts","secondaryHosts","preferredDomains","forEach","item","push","isHost","children","secondaryDomains","sort","h1","h2","label","localeCompare","lbaToBytes","witnessHostDiskMapping","ssd","capacity","nonSsd","reduce","sum","disk","required","WitnessHostUtil","configType","hasClaimedDisks","TWO_HOST_VSAN_CLUSTER"],"mappings":"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","file":"139-es5.js","sourcesContent":["/* Copyright 2017-2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {Component, OnInit} from \"@angular/core\";\nimport {ManagedObject} from \"@service/managed-object\";\nimport {ChangeWitnessContext} from \"@navigation/context/change-witness-context\";\nimport {PageSet} from \"@component/wizard/flow-wizard.component\";\nimport {ConfigureStretchedClusterService} from \"@generated/configure-stretched-cluster-service\";\nimport {VsanUiUtils} from \"@util/vsan-util\";\nimport {StretchedClusterSummaryPageComponent} from \"./summary-page.component\";\nimport {FaultDomainsPageComponent} from \"@component/wizard/shared-pages/fault-domains-page.component\";\nimport {WitnessHostPageComponent} from \"@component/wizard/shared-pages/witness-host-page.component\";\nimport {ClaimDisksWitnessHostPage} from \"@component/wizard/shared-pages/claim-disks-witness-host-page.component\";\nimport {VsanStretchedClusterService} from \"@generated/vsan-stretched-cluster-service\";\nimport {VsanConfigService} from \"@generated/vsan-config-service\";\nimport {WitnessHostUtil} from \"@util/witness-host.util\";\nimport {VsanClusterType} from \"@generated/vsan-cluster-type\";\n\n@Component({\n   selector: \"configure-stretched-cluster-wizard\",\n   template: `\n      <vsan-flow-wizard\n            [title]=\"title\"\n            [pageSets]=\"pages\"\n            [contextProperties]=\"context\"\n            [startingTaskProperty]=\"startingTaskProperty\"\n            [services]=\"services\">\n      </vsan-flow-wizard>`,\n})\nexport class ConfigureStretchedClusterWizardComponent implements OnInit {\n\n   title: string = \"\";\n   pages: PageSet[];\n   context: any;\n   startingTaskProperty: string = \"\";\n   services: any[] = [ConfigureStretchedClusterService, VsanConfigService, VsanStretchedClusterService];\n\n   private isVsanMaxEnabled: boolean;\n\n   constructor(private vsanConfigService: VsanConfigService) {\n   }\n\n   async ngOnInit(): Promise<void> {\n      const changeWitnessContext: ChangeWitnessContext = VsanUiUtils.getModalContext();\n      const clusterRef: ManagedObject = ManagedObject.contextObject;\n      this.isVsanMaxEnabled = await this.vsanConfigService.isVsanMaxEnabled(clusterRef);\n      if (changeWitnessContext) {\n         this.changeWitnessHost(clusterRef, changeWitnessContext);\n      } else {\n         this.configureStretchedCluster(clusterRef);\n      }\n   }\n\n   private configureStretchedCluster(clusterRef: ManagedObject): void {\n      this.context = {\n         clusterRef: clusterRef,\n         isVsanMaxWorkflow: this.isVsanMaxEnabled,\n      };\n\n      this.startingTaskProperty = \"configureStretchedClusterTask\";\n      this.title = VsanUiUtils.getString(\"vsan.faultDomains.stretchedCluster.wizard.configure.title\");\n\n      this.pages = [\n         new PageSet([FaultDomainsPageComponent, WitnessHostPageComponent]),\n         new PageSet([ClaimDisksWitnessHostPage], this.includeClaimDisksPage),\n         new PageSet([StretchedClusterSummaryPageComponent]),\n      ];\n   }\n\n   private changeWitnessHost(clusterRef: ManagedObject, stretchedClusterContext: ChangeWitnessContext): void {\n      this.context = {\n         clusterRef: clusterRef,\n         preferredName: stretchedClusterContext.preferredDomain,\n         currentWitnessHostRef: stretchedClusterContext.currentWitnessHost,\n         isVsanMaxWorkflow: this.isVsanMaxEnabled,\n      };\n\n      this.startingTaskProperty = \"changeWitnessHostTask\";\n      this.title = VsanUiUtils.getString(\"vsan.faultDomains.stretchedCluster.wizard.changeWitnessHost.title\");\n\n      this.pages = [\n         new PageSet([WitnessHostPageComponent]),\n         new PageSet([ClaimDisksWitnessHostPage], this.includeClaimDisksPage),\n         new PageSet([StretchedClusterSummaryPageComponent]),\n      ];\n   }\n\n   private includeClaimDisksPage = (hasDiskGroupsOnWitness: boolean, isWitnessDeployedFromOvf: boolean): boolean => {\n      // Show the claim disks page in vSAN 1 cluster if it doesn't already have a disk group.\n      return WitnessHostUtil.isClaimDisksPageVisible(\n            VsanClusterType.STRETCHED_CLUSTER,\n            hasDiskGroupsOnWitness,\n            isWitnessDeployedFromOvf,\n            this.isVsanMaxEnabled);\n   };\n}\n","/* Copyright 2019-2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {ClarityModule} from \"@clr/angular\";\nimport {DiskmgmtCommonModule} from \"@component/diskmgmt/diskmgmt-common.module\";\nimport {VsanCommonModule} from \"app/vsan/common/vsan-common.module\";\nimport {FlowWizardModule} from \"@component/wizard/flow-wizard.module\";\nimport {WizardSharedPagesModule} from \"@component/wizard/shared-pages/wizard-shared-pages.module\";\nimport {ConfigureStretchedClusterWizardComponent} from \"./configure-stretched-cluster.component\";\nimport {StretchedClusterSummaryPageComponent} from \"./summary-page.component\";\n\nconst routes: Routes = [\n   {\n      path: \"\",\n      component: ConfigureStretchedClusterWizardComponent\n   }\n];\n\n@NgModule({\n   imports: [\n      CommonModule,\n      FormsModule,\n      ReactiveFormsModule,\n      ClarityModule,\n      VsanCommonModule,\n      FlowWizardModule,\n      DiskmgmtCommonModule,\n      WizardSharedPagesModule,\n      RouterModule.forChild(routes)\n   ],\n   declarations: [\n      ConfigureStretchedClusterWizardComponent,\n      StretchedClusterSummaryPageComponent,\n   ],\n   entryComponents: [\n      StretchedClusterSummaryPageComponent,\n   ]\n})\nexport class ConfigureStretchedClusterModule {\n}","\n      <vsan-flow-wizard\n            [title]=\"title\"\n            [pageSets]=\"pages\"\n            [contextProperties]=\"context\"\n            [startingTaskProperty]=\"startingTaskProperty\"\n            [services]=\"services\">\n      </vsan-flow-wizard>","<div *ngIf=\"secondaryName\">\n   <vsan-summary-entry [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.preferredName' | localized\">\n      <span id=\"preferred-domain-entry\">\n         {{preferredName}}\n      </span>\n   </vsan-summary-entry>\n   <vsan-summary-entry [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.preferredHosts' | localized\">\n      <span id=\"preferred-hosts-entry\">\n         <div *ngFor=\"let host of preferredHosts\">\n            {{host.label}}\n         </div>\n      </span>\n   </vsan-summary-entry>\n   <vsan-summary-entry [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.secondaryName' | localized\">\n      <span id=\"secondary-domain-entry\">\n         {{secondaryName}}\n      </span>\n   </vsan-summary-entry>\n   <vsan-summary-entry [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.secondaryHosts' | localized\">\n      <span id=\"secondary-hosts-entry\">\n         <div *ngFor=\"let host of secondaryHosts\">\n            {{host.label}}\n         </div>\n      </span>\n   </vsan-summary-entry>\n</div>\n<vsan-summary-entry [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.witnessHost' | localized\">\n   <span id=\"witness-host-entry\">\n      {{witnessHostName}}\n   </span>\n</vsan-summary-entry>\n<vsan-summary-entry\n      [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.claimedCache' | localized\"\n      *ngIf=\"witnessHostDiskMapping\">\n   <span id=\"claimed-cache-entry\">\n      {{claimedCache() | fileSize}}\n   </span>\n</vsan-summary-entry>\n<vsan-summary-entry\n      [label]=\"'vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.claimedCapacity' | localized\"\n      *ngIf=\"witnessHostDiskMapping\">\n   <span id=\"claimed-capacity-entry\">\n      {{claimedCapacity() | fileSize}}\n   </span>\n</vsan-summary-entry>\n\n","/* Copyright 2017-2019 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {Component, OnInit} from \"@angular/core\";\nimport {ManagedObject} from \"@service/managed-object\";\nimport {VsanUiUtils} from \"@util/vsan-util\";\nimport {WizardPage, InputProperty} from \"@component/wizard/flow-metadata\";\nimport {DomainOrHostData} from \"@generated/domain-or-host-data\";\nimport {VsanDiskMapping} from \"@generated/vsan-disk-mapping\";\nimport {DiskMgmtUtil} from \"@util/disk-mgmt.util\";\n\n@Component({\n   templateUrl: \"./summary-page.html\"\n})\n@WizardPage(\n      VsanUiUtils.getString(\"vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.title\"),\n      VsanUiUtils.getString(\"vsan.faultDomains.stretchedCluster.wizard.configure.page.summary.description\")\n)\nexport class StretchedClusterSummaryPageComponent implements OnInit {\n\n   preferredHosts: DomainOrHostData[] = [];\n   secondaryHosts: DomainOrHostData[] = [];\n\n   @InputProperty()\n   preferredName: string;\n\n   @InputProperty(InputProperty.required(false))\n   preferredDomains: DomainOrHostData[];\n\n   @InputProperty(InputProperty.required(false))\n   secondaryName: string;\n\n   @InputProperty(InputProperty.required(false))\n   secondaryDomains: DomainOrHostData[];\n\n   @InputProperty()\n   witnessHost: ManagedObject;\n\n   @InputProperty()\n   witnessHostName: string;\n\n   @InputProperty(InputProperty.required(false))\n   witnessHostDiskMapping: VsanDiskMapping;\n\n   ngOnInit() {\n      if (this.preferredDomains) { // configure cluster mode\n         this.preferredDomains.forEach(item =>\n               this.preferredHosts.push(... (item.isHost ? [item] : item.children)));\n         this.secondaryDomains.forEach(item =>\n               this.secondaryHosts.push(... (item.isHost ? [item] : item.children)));\n         this.preferredHosts.sort((h1, h2) => h1.label.localeCompare(h2.label));\n         this.secondaryHosts.sort((h1, h2) => h1.label.localeCompare(h2.label));\n      } // else change witness host mode\n   }\n\n   claimedCache(): number {\n      return DiskMgmtUtil.lbaToBytes(this.witnessHostDiskMapping.ssd.capacity);\n   }\n\n   claimedCapacity(): number {\n      return this.witnessHostDiskMapping.nonSsd.reduce((sum, disk) => sum += DiskMgmtUtil.lbaToBytes(disk.capacity), 0);\n   }\n}","/* Copyright 2021-2022 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {VsanClusterType} from \"@generated/vsan-cluster-type\";\n\nexport class WitnessHostUtil {\n   /**\n    * Used to check if the claim disks page for a witness host must be shown to the user in various wizards.\n    */\n   static isClaimDisksPageVisible(configType: VsanClusterType,\n         hasClaimedDisks: boolean,\n      isWitnessDeployedFromOvf: boolean,\n      isVsanMaxWorkflow: boolean): boolean {\n      if (configType !== VsanClusterType.STRETCHED_CLUSTER && configType !== VsanClusterType.TWO_HOST_VSAN_CLUSTER) {\n         return false;\n      }\n\n      // Show the claim disks page if it doesn't already have claimed disks or if it is deployed from OVF\n      return isVsanMaxWorkflow && !hasClaimedDisks && !isWitnessDeployedFromOvf\n            || !isVsanMaxWorkflow && !hasClaimedDisks;\n   }\n}"]}