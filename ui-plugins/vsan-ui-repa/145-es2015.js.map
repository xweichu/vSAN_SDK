{"version":3,"sources":["./src/app/vsan/file-services/shared/file-services-common.module.ts","./src/app/vsan/file-services/file-analytics/edit-file-analytics-dialog.html","./src/app/vsan/file-services/file-analytics/edit-file-analytics.module.ts","./src/app/vsan/file-services/file-analytics/edit-file-analytics-dialog.component.ts"],"names":[],"mappings":";;;;;;;;;;AAiCA;AAAA;AAAO,MAAM,wBAAwB;CACpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mEC1BE;YAAA;YAAA,YAG0C;YAFhB;;gCAAyC;;YADnE;QAAA,gmBAG0C,mFAC1C,mDAF0B,oBAAwC,EADxC,mBAAyC,oBAEzC,oBAAe,EAHzC,YAG0C,EADhB,SAAwC,EADxC,SAAyC,EAEzC,SAAe;AAAA;;8MAXyC,0EACrF;YAAA;YAAA,YAKsB;YADnB;;gCAAiC;;YACjC;;gCAAkB;;YALrB;QAAA,8tBAKsB,KAJnB,uDAAuE,IAIpD,0EACnB,MAAoF,0EACpF,4ZAG0C,IACf,uEAC9B,MAAmB,0EACnB,mDAZG,uMAAuE,IAGvE,mBAAiC,gBADjC,mBAAuB,UADvB,mBAAwB,UAF3B,YAKsB,EAJnB,SAAuE,EAGvE,SAAiC,EADjC,SAAuB,EADvB,SAAwB,GAKE,mBAAyB,oBAAnD,YAG0C,EAHhB,SAAyB;AAAA;;;;;;;;;;;;;;;;;ACLtD;AAAA;AAAA;AAAwF;AAMxF,MAAM,MAAM,GAAW;IACpB;QACG,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sGAAgC;KAC7C;CACH,CAAC;AAcK,MAAM,uBAAuB;CACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBqD;AACV;AAOrC,MAAM,gCAAgC;IAQ1C,YAAoB,yBAAuD,EAC7D,oBAAgD;QAD1C,8BAAyB,GAAzB,yBAAyB,CAA8B;QAC7D,yBAAoB,GAApB,oBAAoB,CAA4B;QAR9D,YAAO,GAAY,IAAI,CAAC;IAQyC,CAAC;IAE5D,QAAQ;;YACX,IAAI,CAAC,UAAU,GAAG,qEAAa,CAAC,aAAa,CAAC;YAC9C,IAAI;gBACD,IAAI,CAAC,iBAAiB,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,0BAA0B,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACrG,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,CAAC;aACpF;YAAC,OAAO,CAAC,EAAE;gBACT,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACtB;oBAAS;gBACP,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;aACvB;QACJ,CAAC;KAAA;IAEK,EAAE;;YACL,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE;gBAC1B,2DAAW,CAAC,gBAAgB,EAAE,CAAC;aACjC;YACD,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI;gBACD,MAAM,OAAO,GACP,MAAM,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;gBACzG,2DAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;aACxC;YAAC,OAAO,CAAC,EAAE;gBACT,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACtB;oBAAS;gBACP,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;aACvB;QACJ,CAAC;KAAA;IAEO,eAAe;QACpB,OAAO,IAAI,CAAC,4BAA4B,KAAK,IAAI,CAAC,iBAAiB,CAAC,sBAAsB,CAAC;IAC9F,CAAC;IAEO,WAAW,CAAC,KAAa;QAC9B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;CACH","file":"145-es2015.js","sourcesContent":["/* Copyright 2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {ClarityModule} from \"@clr/angular\";\nimport {FileServicesOvfSettings} from \"./file-services-ovf-settings.component\";\nimport {ShareNetPermissionComponent} from \"./share-net-permission.component\";\nimport {CommonPipeModule} from \"@pipe/common-pipe.module\";\nimport {EditFileAnalyticsComponent} from \"./edit-file-analytics.component\";\nimport {FormsModule} from \"@angular/forms\";\nimport {ValidationModule} from \"@component/validation/validation.module\";\nimport {EditShareFileAnalyticsComponent} from \"./edit-share-file-analytics.component\";\n\n@NgModule({\n   imports: [\n      CommonModule,\n      ClarityModule,\n      CommonPipeModule,\n      FormsModule,\n      ValidationModule,\n   ],\n   declarations: [\n      FileServicesOvfSettings,\n      ShareNetPermissionComponent,\n      EditFileAnalyticsComponent,\n      EditShareFileAnalyticsComponent,\n   ],\n   exports: [\n      FileServicesOvfSettings,\n      ShareNetPermissionComponent,\n      EditFileAnalyticsComponent,\n      EditShareFileAnalyticsComponent\n   ],\n})\nexport class FileServicesCommonModule {\n}","<!-- Copyright 2020-2022 VMware, Inc. All rights reserved. -- VMware Confidential -->\n<vsan-edit-prompt\n   [title]=\"'vsan.cluster.dialog.file.analytics.enable.title' | localized\"\n   [blockContent]=\"loading\"\n   [blockButton]=\"loading\"\n   [(alertMessages)]=\"alertMessages\"\n   (onConfirm)=\"ok()\">\n   <!-- The isFileAnalyticsRuntimeSupported check is done before dialog gets opened -->\n   <vsan-edit-file-analytics *ngIf=\"fileServiceConfig\"\n                             [(fileServiceConfig)]=\"fileServiceConfig\"\n                             [isFileAnalyticsRuntimeSupported]=\"true\"\n                             [isEdit]=\"true\">\n   </vsan-edit-file-analytics>\n</vsan-edit-prompt>\n","/* Copyright 2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {EditFileAnalyticsDialogComponent} from \"./edit-file-analytics-dialog.component\";\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {CommonPipeModule} from \"@pipe/common-pipe.module\";\nimport {FileServicesCommonModule} from \"../shared/file-services-common.module\";\nimport {PromptModule} from \"@component/dialog/prompt/prompt.module\";\n\nconst routes: Routes = [\n   {\n      path: \"\",\n      component: EditFileAnalyticsDialogComponent,\n   },\n];\n\n@NgModule({\n   imports: [\n      CommonModule,\n      CommonPipeModule,\n      PromptModule,\n      FileServicesCommonModule,\n      RouterModule.forChild(routes),\n   ],\n   declarations: [\n      EditFileAnalyticsDialogComponent,\n   ],\n})\nexport class EditFileAnalyticsModule {\n}","/* Copyright 2020-2021 VMware, Inc. All rights reserved. -- VMware Confidential */\nimport {Component, OnInit} from \"@angular/core\";\nimport {VsanFileServiceCommonConfig} from \"@generated/vsan-file-service-common-config\";\nimport {VsanFileServiceConfigService} from \"@generated/vsan-file-service-config-service\";\nimport {ManagedObject} from \"@service/managed-object\";\nimport {VsanUiUtils} from \"@util/vsan-util\";\nimport {FileAnalyticsConfigService} from \"@generated/file-analytics-config-service\";\n\n@Component({\n   templateUrl: \"edit-file-analytics-dialog.html\",\n   selector: \"vsan-edit-file-analytics-dialog\",\n})\nexport class EditFileAnalyticsDialogComponent implements OnInit {\n   loading: boolean = true;\n   fileServiceConfig: VsanFileServiceCommonConfig;\n   alertMessages: string[];\n\n   private clusterRef: ManagedObject;\n   private originalFileAnalyticsEnabled: boolean;\n\n   constructor(private fileServicesConfigService: VsanFileServiceConfigService,\n         private fileAnalyticsService: FileAnalyticsConfigService) {}\n\n   async ngOnInit(): Promise<void> {\n      this.clusterRef = ManagedObject.contextObject;\n      try {\n         this.fileServiceConfig = await this.fileAnalyticsService.getFileAnalyticsConfigData(this.clusterRef);\n         this.originalFileAnalyticsEnabled = this.fileServiceConfig.isFileAnalyticsEnabled;\n      } catch (e) {\n         this.handleError(e);\n      } finally {\n         this.loading = false;\n      }\n   }\n\n   async ok(): Promise<void> {\n      if (!this.isConfigChanged()) {\n         VsanUiUtils.closeModalDialog();\n      }\n      this.alertMessages = [];\n      this.loading = true;\n      try {\n         const taskRef: ManagedObject =\n               await this.fileServicesConfigService.configureFileService(this.clusterRef, this.fileServiceConfig);\n         VsanUiUtils.closeModalDialog(taskRef);\n      } catch (e) {\n         this.handleError(e);\n      } finally {\n         this.loading = false;\n      }\n   }\n\n   private isConfigChanged(): boolean {\n      return this.originalFileAnalyticsEnabled !== this.fileServiceConfig.isFileAnalyticsEnabled;\n   }\n\n   private handleError(error: string): void {\n      this.alertMessages.push(error);\n   }\n}\n"],"sourceRoot":"webpack:///"}